<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc compact="yes"?>
<?rfc strict="yes"?>
<?rfc symrefs="yes"?>
<?rfc toc="yes"?>
<?rfc tocdepth="4"?>
<rfc category="std" docName="draft-miller-xmpp-fed-00" ipr="trust200902">
  <front>
    <title abbrev="XMPP Federation">Interdomain Federation in the Extensible Messaging and Presence Protocol (XMPP)</title>
    <author initials="M." surname="Miller" fullname="Matthew Miller">
      <organization>Cisco Systems, Inc.</organization>
      <address>
        <postal>
          <street>1899 Wynkoop Street, Suite 600</street>
          <city>Denver</city>
          <region>CO</region>
          <code>80202</code>
          <country>USA</country>
        </postal>
        <email>mamille2@cisco.com</email>
      </address>
    </author>
    <author initials="P." surname="Saint-Andre" fullname="Peter Saint-Andre">
      <organization>Cisco Systems, Inc.</organization>
      <address>
        <postal>
          <street>1899 Wynkoop Street, Suite 600</street>
          <city>Denver</city>
          <region>CO</region>
          <code>80202</code>
          <country>USA</country>
        </postal>
        <email>psaintan@cisco.com</email>
      </address>
    </author>
    <date month="June" day="6" year="2012"/>
    <area>RAI</area>
    <keyword>Internet-Draft</keyword>
    <keyword>XMPP</keyword>
    <keyword>Extensible Messaging and Presence Protocol</keyword>
    <keyword>Jabber</keyword>
    <keyword>federation</keyword>
    <abstract>
      <t></t>
    </abstract>
  </front>
  <middle>
    <section title="Introduction" anchor="intro">
      <t>Because the Extensible Messaging and Presence Protocol (XMPP) is built upon a distributed client-server architecture <xref target='RFC6120'/>, it has long included methods for establishing connections among servers on the network.  In XMPP, these server-to-server connections typically do not require pre-arranged peering agreements and thus are negotiated on an ad-hoc or as-needed basis.  Furthermore, to the extent that servers "trust" each other, such trust is established based on information obtained from the Domain Name System (DNS), the Public Key Infrastructure (PKI), or similar sources.  Since XMPP servers are associated with DNS domain names (or, less commonly, IP addresses), server-to-server connectivity is referred to as interdomain federation.  This document describes a model for interdomain federation and modernizes some federation methods to reflect progress in several underlying technologies, especially DNS Security <xref target='RFC4033'/>.</t>
    </section>
    <section title="Terminology" anchor="terms">
      <t>This document inherits XMPP-related terminology from <xref target="RFC6120"/> and <xref target='XEP-0220'/>, DNS-related terminology from <xref target='RFC1034'/>, <xref target='RFC1035'/>, <xref target='RFC2782'/> and <xref target="RFC4033"/>, and security-related terminology from <xref target='RFC4949'/> and <xref target='RFC5280'/>.  The terms "source domain" and "derived domain" are used as defined in the "CertID" specification <xref target="RFC6125"/>.</t>
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <xref target='RFC2119'/>.</t>
    </section>
    <section title="Problem Statement" anchor="problem">
      <t></t>
    </section>
    <section title="Requirements" anchor="reqs">
      <t></t>
    </section>
    <section title="Framework" anchor="framework">
      <t></t>
    </section>
    <section title="Validation Prooftypes" anchor="valid">
        <section title="PKI" anchor="valid-pki">
          <t></t>
        </section>
        <section title="DANE" anchor="valid-dane">
          <t></t>
        </section>
        <section title="HTTPS/.well-known/" anchor="valid-https">
          <t>This prooftype relies on the existing trust for HTTPS to provide a delegation path from a source domain to a target host.</t>
          <t>
            <list style="numbers">
              <t>The initiating entity performs an HTTPS GET to the path "/.well-known/tls/&lt;service&gt;.&lt;protocol&gt;.&lt;source-domain&gt;" to the source domain (e.g. "https://im.example.com/.well-known/tls/_xmpp-client._tcp.im.example.com")</t>
              <t>The source domain HTTPS service SHOULD respond with a 302 Moved; the 'Location' header MUST specify an HTTPS URL that directs to the target host, and the path MUST be identical to the path of the original request (e.g. "Location: https://hosting.example.com/.well-known/tls/_xmpp-client._tcp.im.example.com")</t>
              <t>The initiating entity performs an HTTPS GET to the redirected URL specified in the 'Location' header</t>
              <t>The target host HTTPS service MUST respond with a success status code, with the message body set to the PEM-encoded certificate to expect.</t>
            </list>
          </t>
        </section>
        <section title="Dialback Keys" anchor="valid-dbkeys">
          <t></t>
        </section>
        <section title="Other" anchor="valid-other">
          <t></t>
        </section>
    </section>
    <section title="Assertions" anchor="assert">
      <t></t>
    </section>
    <section title="Examples" anchor="examples">
      <t></t>
    </section>
    <section title="Internationalization Considerations" anchor="i18n">
      <t></t>
    </section>
    <section title="IANA Considerations" anchor="iana">
      <t></t>
    </section>
    <section title="Security Considerations" anchor="security">
      <t></t>
    </section>
  </middle>
  <back>
    <references title="Normative References">
      <reference anchor='RFC1034'>
        <front>
          <title abbrev='Domain Concepts and Facilities'>Domain names - concepts and facilities</title>
          <author initials='P.' surname='Mockapetris' fullname='P. Mockapetris'>
            <organization>Information Sciences Institute (ISI)</organization>
          </author>
          <date year='1987' day='1' month='November' />
        </front>
        <seriesInfo name='STD' value='13' />
        <seriesInfo name='RFC' value='1034' />
        <format type='TXT' octets='129180' target='http://www.rfc-editor.org/rfc/rfc1034.txt' />
      </reference>
      <reference anchor='RFC1035'>
        <front>
          <title abbrev='Domain Implementation and Specification'>Domain names - implementation and specification</title>
          <author initials='P.' surname='Mockapetris' fullname='P. Mockapetris'>
            <organization>USC/ISI</organization>
            <address>
              <postal>
                <street>4676 Admiralty Way</street>
                <city>Marina del Rey</city>
                <region>CA</region>
                <code>90291</code>
                <country>US</country>
              </postal>
              <phone>+1 213 822 1511</phone>
            </address>
          </author>
          <date year='1987' day='1' month='November' />
        </front>
        <seriesInfo name='STD' value='13' />
        <seriesInfo name='RFC' value='1035' />
        <format type='TXT' octets='125626' target='http://www.rfc-editor.org/rfc/rfc1035.txt' />
      </reference>
      <reference anchor="RFC2119">
        <front>
          <title abbrev="RFC Key Words">Key words for use in RFCs to Indicate Requirement Levels</title>
          <author initials="S." surname="Bradner" fullname="Scott Bradner">
            <organization>Harvard University</organization>
            <address>
              <postal>
                <street>1350 Mass.  Ave.</street>
                <street>Cambridge</street>
                <street>MA 02138</street>
              </postal>
              <phone>- +1 617 495 3864</phone>
              <email>-</email>
            </address>
          </author>
          <date month="March" year="1997"/>
          <area>General</area>
          <keyword>keyword</keyword>
          <abstract>
            <t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized.  This document defines these words as they should be interpreted in IETF documents.  Authors who follow these guidelines should incorporate this phrase near the beginning of their document: 
              <list><t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119.</t></list>
            </t>
            <t>Note that the force of these words is modified by the requirement level of the document in which they are used.</t>
          </abstract>
        </front>
        <seriesInfo name="BCP" value="14"/>
        <seriesInfo name="RFC" value="2119"/>
      </reference>
      <reference anchor='RFC2782'>
        <front>
          <title abbrev='DNS SRV RR'>A DNS RR for specifying the location of services (DNS SRV)</title>
          <author initials='A.' surname='Gulbrandsen' fullname='Arnt Gulbrandsen'>
            <organization>Troll Tech</organization>
            <address>
              <postal>
                <street>Waldemar Thranes gate 98B</street>
                <city>Oslo</city>
                <region />
                <code>N-0175</code>
                <country>NO</country>
              </postal>
              <phone>+47 22 806390</phone>
              <facsimile>+47 22 806380</facsimile>
              <email>arnt@troll.no</email>
            </address>
          </author>
          <author initials='P.' surname='Vixie' fullname='Paul Vixie'>
            <organization>Internet Software Consortium</organization>
            <address>
              <postal>
                <street>950 Charter Street</street>
                <city>Redwood City</city>
                <region>CA</region>
                <code>94063</code>
                <country>US</country>
              </postal>
              <phone>+1 650 779 7001</phone>
            </address>
          </author>
          <author initials='L.' surname='Esibov' fullname='Levon Esibov'>
            <organization>Microsoft Corporation</organization>
            <address>
              <postal>
                <street>One Microsoft Way</street>
                <city>Redmond</city>
                <region>WA</region>
                <code>98052</code>
                <country>US</country>
              </postal>
              <email>levone@microsoft.com</email>
            </address>
          </author>
          <date year='2000' month='February' />
          <abstract>
            <t>This document describes a DNS RR which specifies the location of the
             server(s) for a specific protocol and domain.</t>
          </abstract>
        </front>
        <seriesInfo name='RFC' value='2782' />
        <format type='TXT' octets='24013' target='http://www.rfc-editor.org/rfc/rfc2782.txt' />
      </reference>
      <reference anchor="RFC4033">
        <front>
          <title>DNS Security Introduction and Requirements</title>
          <author initials="R." surname="Arends" fullname="Roy Arends">
            <organization>Telematica Instituut</organization>
            <address>
              <email>roy.arends@telin.nl</email>
            </address>
          </author>
          <author initials="R." surname="Austein" fullname="Rob Austein">
            <organization>Internet Systems Consortium</organization>
            <address>
              <email>sra@isc.org</email>
            </address>
          </author>
          <author initials="M." surname="Larson" fullname="Matt Larson">
            <organization>VeriSign, Inc.</organization>
            <address>
              <email>mlarson@verisign.com</email>
            </address>
          </author>
          <author initials="D." surname="Massey" fullname="Dan Massey">
            <organization>Colorado State University</organization>
            <address>
              <email>massey@cs.colostate.edu</email>
            </address>
          </author>
          <author initials="S." surname="Rose" fullname="Scott Rose">
            <organization>National Institute for Standards and Technology</organization>
            <address>
              <email>scott.rose@nist.gov</email>
            </address>
          </author>
          <date month="May" year="2005"/>
        </front>
        <seriesInfo name="RFC" value="4033"/>
        <format type="TXT" target="http://tools.ietf.org/rfc/rfc4033.txt"/>
      </reference>
      <reference anchor="RFC4949">
        <front>
          <title>Internet Security Glossary, Version 2</title>
          <author initials="R." surname="Shirey" fullname="R. Shirey">
            <organization/>
          </author>
          <date year="2007" month="August"/>
          <abstract>
            <t>This Glossary provides definitions, abbreviations, and explanations of terminology for information system security.  The 334 pages of entries offer recommendations to improve the comprehensibility of written material that is generated in the Internet Standards Process (RFC 2026).  The recommendations follow the principles that such writing should (a) use the same term or definition whenever the same concept is mentioned; (b) use terms in their plainest, dictionary sense; (c) use terms that are already well-established in open publications; and (d) avoid terms that either favor a particular vendor or favor a particular technology or mechanism over other, competing techniques that already exist or could be developed.  This memo provides information for the Internet community.</t>
          </abstract>
        </front>
        <seriesInfo name="RFC" value="4949"/>
        <format type="TXT" octets="867626" target="ftp://ftp.isi.edu/in-notes/rfc4949.txt"/>
      </reference>
      <reference anchor="RFC5280">
        <front>
          <title>Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile</title>
          <author initials="D." surname="Cooper" fullname="D. Cooper">
            <organization/>
          </author>
          <author initials="S." surname="Santesson" fullname="S. Santesson">
            <organization/>
          </author>
          <author initials="S." surname="Farrell" fullname="S. Farrell">
            <organization/>
          </author>
          <author initials="S." surname="Boeyen" fullname="S. Boeyen">
            <organization/>
          </author>
          <author initials="R." surname="Housley" fullname="R. Housley">
            <organization/>
          </author>
          <author initials="W." surname="Polk" fullname="W. Polk">
            <organization/>
          </author>
          <date year="2008" month="May"/>
          <abstract>
            <t>This memo profiles the X.509 v3 certificate and X.509 v2 certificate revocation list (CRL) for use in the Internet.  An overview of this approach and model is provided as an introduction.  The X.509 v3 certificate format is described in detail, with additional information regarding the format and semantics of Internet name forms.  Standard certificate extensions are described and two Internet-specific extensions are defined.  A set of required certificate extensions is specified.  The X.509 v2 CRL format is described in detail along with standard and Internet-specific extensions.  An algorithm for X.509 certification path validation is described.  An ASN.1 module and examples are provided in the appendices. [STANDARDS TRACK]</t>
          </abstract>
        </front>
        <seriesInfo name="RFC" value="5280"/>
        <format type="TXT" octets="352580" target="ftp://ftp.isi.edu/in-notes/rfc5280.txt"/>
      </reference>
      <reference anchor="RFC6120">
        <front>
          <title>Extensible Messaging and Presence Protocol (XMPP): Core</title>
          <author initials="P." surname="Saint-Andre" fullname="Peter Saint-Andre">
            <organization>Cisco</organization>
            <address>
              <email>psaintan@cisco.com</email>
            </address>
          </author>
          <date month="March" year="2011"/>
        </front>
        <seriesInfo name="RFC" value="6120"/>
        <format type="TXT"  target="http://tools.ietf.org/rfc/rfc6120.txt"/>
      </reference>
      <reference anchor="RFC6125">
        <front>
          <title>Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)</title>
          <author initials="P." surname="Saint-Andre" fullname="Peter Saint-Andre">
            <organization>Cisco</organization>
            <address>
              <email>psaintan@cisco.com</email>
            </address>
          </author>
          <author initials="J." surname="Hodges" fullname="Jeff Hodges">
            <organization>PayPal</organization>
            <address>
              <email>jeff.hodges@paypal.com</email>
            </address>
          </author>
          <date month="March" year="2011"/>
        </front>
        <seriesInfo name="RFC" value="6125"/>
        <format type="TXT" target="http://tools.ietf.org/rfc/rfc6125.txt"/>
      </reference>
      <reference anchor="XEP-0220">
        <front>
          <title>Server Dialback</title>
          <author initials="J" surname="Miller" fullname="Jeremie Miller">
            <address>
              <email>jer@jabber.org</email>
            </address>
          </author>
          <author initials="P" surname="Saint-Andre" fullname="Peter Saint-Andre">
            <organization>Cisco</organization>
            <address>
              <email>psaintan@cisco.com</email>
            </address>
          </author>
          <author initials="P" surname="Hancke" fullname="Philipp Hancke">
            <address>
              <email>fippo@goodadvice.pages.de</email>
            </address>
          </author>
          <date month="August" year="2011"/>
        </front>
        <seriesInfo name="XSF XEP" value="0220"/>
        <format type="HTML" target="http://xmpp.org/extensions/xep-0220.html#appendix-authorinfo"/>
      </reference>
    </references>
  </back>
</rfc>
