


Network Working Group                                          M. Miller
Internet-Draft                                            P. Saint-Andre
Intended status: Standards Track                     Cisco Systems, Inc.
Expires: December 8, 2012                                   June 6, 2012


Domain Name Associations (DNA) in the Extensible Messaging and Presence
                            Protocol (XMPP)
                        draft-miller-xmpp-dna-00

Abstract


Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on December 8, 2012.

Copyright Notice

   Copyright (c) 2012 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.







Miller & Saint-Andre    Expires December 8, 2012                [Page 1]

Internet-Draft                  XMPP DNA                       June 2012


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . . . 3
   3.  Problem Statement . . . . . . . . . . . . . . . . . . . . . . . 3
   4.  Requirements  . . . . . . . . . . . . . . . . . . . . . . . . . 3
   5.  Framework . . . . . . . . . . . . . . . . . . . . . . . . . . . 4
   6.  Prooftypes  . . . . . . . . . . . . . . . . . . . . . . . . . . 4
     6.1.  PKI . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4
     6.2.  DANE  . . . . . . . . . . . . . . . . . . . . . . . . . . . 4
     6.3.  HTTPS/.well-known . . . . . . . . . . . . . . . . . . . . . 4
   7.  Delegation Methods  . . . . . . . . . . . . . . . . . . . . . . 5
     7.1.  DNSSEC  . . . . . . . . . . . . . . . . . . . . . . . . . . 5
     7.2.  HTTPS Redirect  . . . . . . . . . . . . . . . . . . . . . . 5
   8.  Assertion Mechanisms  . . . . . . . . . . . . . . . . . . . . . 6
     8.1.  TLS . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
     8.2.  SASL  . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
     8.3.  <db:result> . . . . . . . . . . . . . . . . . . . . . . . . 6
   9.  Examples  . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
   10. Internationalization Considerations . . . . . . . . . . . . . . 7
   11. IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 7
   12. Security Considerations . . . . . . . . . . . . . . . . . . . . 7
   13. Normative References  . . . . . . . . . . . . . . . . . . . . . 7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . . 8



























Miller & Saint-Andre    Expires December 8, 2012                [Page 2]

Internet-Draft                  XMPP DNA                       June 2012


1.  Introduction

   Because the Extensible Messaging and Presence Protocol (XMPP) is
   built upon a distributed client-server architecture [RFC6120], it has
   long included methods for establishing connections among servers on
   the network.  In XMPP, these server-to-server connections typically
   do not require pre-arranged peering agreements and thus are
   negotiated on an ad-hoc or as-needed basis.  Furthermore, to the
   extent that servers "trust" each other, such trust is established
   based on information obtained from the Domain Name System (DNS), the
   Public Key Infrastructure (PKI), or similar sources.  Since XMPP
   servers are associated with DNS domain names (or, less commonly, IP
   addresses), server-to-server connectivity is referred to as
   interdomain federation.  This document describes a model for
   interdomain federation and modernizes some federation methods to
   reflect progress in several underlying technologies, especially DNS
   Security [RFC4033].


2.  Terminology

   This document inherits XMPP-related terminology from [RFC6120] and
   [XEP-0220], DNS-related terminology from [RFC1034], [RFC1035],
   [RFC2782] and [RFC4033], and security-related terminology from
   [RFC4949] and [RFC5280].  The terms "source domain" and "derived
   domain" are used as defined in the "CertID" specification [RFC6125].

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   [RFC2119].


3.  Problem Statement

   How did we get here?

   What do we have today?

   What's missing?

   Why does it matter? (virtual hosting, delegation)


4.  Requirements






Miller & Saint-Andre    Expires December 8, 2012                [Page 3]

Internet-Draft                  XMPP DNA                       June 2012


5.  Framework

   concept of "prooftype"

   concept of "assertion"?

   concept of "delegation"?

   what's in a recipe


6.  Prooftypes

   (OR: "how to obtain verification credentials")

6.1.  PKI

   This prooftype is the rules from [RFC6120] for verification
   credentials; the TLS certificate offered MUST match the expected
   identity (i.e. the source domain), and is verified using existing PKI
   technologies.

6.2.  DANE

   This prooftype relies on secure DNS and [DANE] to obtain the
   verification credentials.

6.3.  HTTPS/.well-known

   This prooftype relies on the existing trust for HTTPS to provide a
   delegation path from a source domain to a target host.

   1.  The initiating entity performs an HTTPS GET to the path "/.well-
       known/tls/_<service>._tcp>source domain>.cert" to the source
       domain; where "_<service>" MUST be either "_xmpp-client" for XMPP
       client-to-server connections or "_xmpp-server" for XMPP server-
       to-server connections:

   GET /.well-known/_xmpp-server._tcp.im.example.com.cer HTTP/1.1
   Host: im.example.com


   2.  If the source domain HTTPS server has a certificate for the
       requested path, it MUST respond with a success status code, with
       the message body as the PEM-encoded certificate to expect:






Miller & Saint-Andre    Expires December 8, 2012                [Page 4]

Internet-Draft                  XMPP DNA                       June 2012


   HTTP/1.1 200 OK
   Content-Type: application/pkix-cert
   Content-Length: 839

   -----BEGIN CERTIFICATE-----
   MIICPTCCAaYCCQDDVeBaBmWC/jANBgkqhkiG9w0BAQUFADBjMQswCQYDVQQGEwJV
   UzERMA8GA1UECBMIQ29sb3JhZG8xDzANBgNVBAcTBkRlbnZlcjEXMBUGA1UEChMO
   aW0uZXhhbXBsZS5jb20xFzAVBgNVBAMTDmltLmV4YW1wbGUuY29tMB4XDTEyMDYx
   MTIxNTQ0NFoXDTIyMDYwOTIxNTQ0NFowYzELMAkGA1UEBhMCVVMxETAPBgNVBAgT
   CENvbG9yYWRvMQ8wDQYDVQQHEwZEZW52ZXIxFzAVBgNVBAoTDmltLmV4YW1wbGUu
   Y29tMRcwFQYDVQQDEw5pbS5leGFtcGxlLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOB
   jQAwgYkCgYEA4hoKhi/B07eQH+1NB9gWiNFDT//AbTHQOEC0AOr4Gh/o9PUp7kD0
   gklU4uv7rSAhAyCe4WaOiQ/HShzEryGfHiZmWht0BaYmj19iuPWRecZOXWqKZji9
   NtAxn9l3kdon/YLJcrPGyNTGK66+ggNaqy8LkQQpI4rff60yHHZ/0XkCAwEAATAN
   BgkqhkiG9w0BAQUFAAOBgQDcwiu30bSMlykWYz+tTDSlQ3wLSVB9RsR8jXmJvMo7
   y7icXwg54a9M3xipjZtrfAhYM5I5iqUTQPki6s26n9SQpRm5bonEFDA3WGwrwma3
   5biP9+NSBWzSaDF8AztwFNKXXl6/U6hWwG05G/NdeS11gpww9NUDraJgVoDpRK04
   tg==
   -----END CERTIFICATE-----



7.  Delegation Methods

7.1.  DNSSEC

7.2.  HTTPS Redirect

   1.  The initiating entity performs an HTTPS GET to the path "/.well-
       known/tls/_<service>._tcp>source domain>.cert" to the source
       domain; where "_<service>" MUST be either "_xmpp-client" for XMPP
       client-to-server connections or "_xmpp-server" for XMPP server-
       to-server connections:

   GET /.well-known/_xmpp-server._tcp.im.example.com.cer HTTP/1.1
   Host: im.example.com


   2.  If the source domain HTTPS server has delegated to a derived
       domain, it MUST respond with a 302 Moved; the 'Location' header
       MUST specify an HTTPS URL, where the hostname and port is the
       derived domain HTTPS server, and the path MUST match the pattern
       "_<service>._tcp.<derived domain>.cer"; where "_<service>" MUST
       be identical to the "_<service>" portion of the original request
       (line breaks added for readability):

   HTTP/1.1 302 Found
   Location: https://hosting.example.com/.well-known



Miller & Saint-Andre    Expires December 8, 2012                [Page 5]

Internet-Draft                  XMPP DNA                       June 2012


             /tls/_xmpp-server._tcp.hosting.example.net.cer


   3.  The initiating entity performs an HTTPS GET to the URL specified
       in the 'Location' header:

   GET /.well-known/_xmpp-server._tcp.hosting.example.cer HTTP/1.1
   Host: hosting.example.net


   4.  If the derived domain HTTPS server has a certificate MUST respond
       with a success status code, it MUST respond with a success status
       code, with the message body as the PEM-encoded certificate to
       expect:

   HTTP/1.1 200 OK
   Content-Type: application/pkix-cert
   Content-Length: 863

   -----BEGIN CERTIFICATE-----
   MIICUTCCAboCCQCtNQRNu3194zANBgkqhkiG9w0BAQUFADBtMQswCQYDVQQGEwJV
   UzERMA8GA1UECBMIQ29sb3JhZG8xDzANBgNVBAcTBkRlbnZlcjEcMBoGA1UEChMT
   aG9zdGluZy5leGFtcGxlLm5ldDEcMBoGA1UEAxMTaG9zdGluZy5leGFtcGxlLm5l
   dDAeFw0xMjA2MTEyMTQ1MjZaFw0yMjA2MDkyMTQ1MjZaMG0xCzAJBgNVBAYTAlVT
   MREwDwYDVQQIEwhDb2xvcmFkbzEPMA0GA1UEBxMGRGVudmVyMRwwGgYDVQQKExNo
   b3N0aW5nLmV4YW1wbGUubmV0MRwwGgYDVQQDExNob3N0aW5nLmV4YW1wbGUubmV0
   MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDi46kMWnCfg0DTrlcTc6AQUci5
   Lu1f2RKRWPEhz8qyt/CO0N5VpxKQMlGp6TApQzFdAfxCUA3rniYFpMq4Hemw2S74
   v1LRoWvROKviKRzunDP3EhPXf6GbgnHRlfBx4yvZtcR1BMnkxgJtbTAJu4/wTRXY
   RE5FKk3xT4IBXTIQFwIDAQABMA0GCSqGSIb3DQEBBQUAA4GBAAvRohCXSfSnHXjv
   84beqmFSYKcZvhVymgxQfhB2ZLNFQvfTO3Qsp/MR0hRRXrJ25n86t49EEXicjC0r
   EdmWaIhdDFhw7hva2byYziww7fJuelD0tpL9nfF5uOIMp3JYyXCBn/FKJhi9HMR1
   d8avm8gJ5Iu7L96qosWzL3epHYW7
   -----END CERTIFICATE-----



8.  Assertion Mechanisms

8.1.  TLS

8.2.  SASL

8.3.  <db:result>







Miller & Saint-Andre    Expires December 8, 2012                [Page 6]

Internet-Draft                  XMPP DNA                       June 2012


9.  Examples


10.  Internationalization Considerations


11.  IANA Considerations


12.  Security Considerations


13.  Normative References

   [DANE]     Hoffman, P. and J. Schlyter, "The DNS-Based Authentication
              of Named Entities (DANE) Transport Layer Security (TLS)
              Protocol: TLSA", draft-ietf-dane-protocol-21 (work in
              progress), May 2012.

   [RFC1034]  Mockapetris, P., "Domain names - concepts and facilities",
              STD 13, RFC 1034, November 1987.

   [RFC1035]  Mockapetris, P., "Domain names - implementation and
              specification", STD 13, RFC 1035, November 1987.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC2782]  Gulbrandsen, A., Vixie, P., and L. Esibov, "A DNS RR for
              specifying the location of services (DNS SRV)", RFC 2782,
              February 2000.

   [RFC4033]  Arends, R., Austein, R., Larson, M., Massey, D., and S.
              Rose, "DNS Security Introduction and Requirements",
              RFC 4033, May 2005.

   [RFC4949]  Shirey, R., "Internet Security Glossary, Version 2",
              RFC 4949, August 2007.

   [RFC5280]  Cooper, D., Santesson, S., Farrell, S., Boeyen, S.,
              Housley, R., and W. Polk, "Internet X.509 Public Key
              Infrastructure Certificate and Certificate Revocation List
              (CRL) Profile", RFC 5280, May 2008.

   [RFC6120]  Saint-Andre, P., "Extensible Messaging and Presence
              Protocol (XMPP): Core", RFC 6120, March 2011.

   [RFC6125]  Saint-Andre, P. and J. Hodges, "Representation and



Miller & Saint-Andre    Expires December 8, 2012                [Page 7]

Internet-Draft                  XMPP DNA                       June 2012


              Verification of Domain-Based Application Service Identity
              within Internet Public Key Infrastructure Using X.509
              (PKIX) Certificates in the Context of Transport Layer
              Security (TLS)", RFC 6125, March 2011.

   [XEP-0220]
              Miller, J., Saint-Andre, P., and P. Hancke, "Server
              Dialback", XSF XEP 0220, August 2011.


Authors' Addresses

   Matthew Miller
   Cisco Systems, Inc.
   1899 Wynkoop Street, Suite 600
   Denver, CO  80202
   USA

   Email: mamille2@cisco.com


   Peter Saint-Andre
   Cisco Systems, Inc.
   1899 Wynkoop Street, Suite 600
   Denver, CO  80202
   USA

   Email: psaintan@cisco.com























Miller & Saint-Andre    Expires December 8, 2012                [Page 8]

